<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
      #chartdiv {
        width: 100%;
        height: 500px;
        max-width:100%;
      }
  </style>
    <script src="./mcs2000.js"></script>
    <script src="./pcs2000.js"></script>
    <script src="./script/index.js"></script>
    <script src="./script/xy.js"></script>
    <script src="./script/themes/Animated.js"></script>
  
    <script type="text/javascript">
      console.log("mcs2000:",mcs2000)
      console.log("pcs2000:",pcs2000)
    </script>
</head>
<body>   
    <div id="chartdiv"></div>
    <script type="text/javascript">
      am5.ready(function() {
        var root = am5.Root.new("chartdiv");
        root.setThemes([
          am5themes_Animated.new(root)
        ]);

        var chart = root.container.children.push(am5xy.XYChart.new(root, {
          panX: true,
          panY: true,
          wheelY: "zoomXY",
          pinchZoomX: true,
          pinchZoomY: true
        }));
        var xAxis = chart.xAxes.push(am5xy.ValueAxis.new(root, {
          renderer: am5xy.AxisRendererX.new(root, { minGridDistance: 50 }),
          tooltip: am5.Tooltip.new(root, {})
        }));
        
        var yAxis = chart.yAxes.push(am5xy.ValueAxis.new(root, {
          renderer: am5xy.AxisRendererY.new(root, {}),
          tooltip: am5.Tooltip.new(root, {})
        }));
        
        // Create series
        // https://www.amcharts.com/docs/v5/charts/xy-chart/series/
        var series = chart.series.push(am5xy.LineSeries.new(root, {
          xAxis: xAxis,
          yAxis: yAxis,
          valueYField: "y",
          valueXField: "x",
          valueField: "value",
          tooltip: am5.Tooltip.new(root, {
            labelText: "x: {valueX}, y: {valueY}, value: {value}"
          })
        }));
            
        series.strokes.template.set("visible", false);
        
        // Add cursor
        // https://www.amcharts.com/docs/v5/charts/xy-chart/cursor/
        chart.set("cursor", am5xy.XYCursor.new(root, {
          xAxis: xAxis,
          yAxis: yAxis,
          snapToSeries: [series]
        }));
        
        // Add scrollbars
        // https://www.amcharts.com/docs/v5/charts/xy-chart/scrollbars/
        chart.set("scrollbarX", am5.Scrollbar.new(root, {
          orientation: "horizontal"
        }));
        
        chart.set("scrollbarY", am5.Scrollbar.new(root, {
          orientation: "vertical"
        }));
        //why is data=stuff  a straignt line?
        var data = []
       
        for (var i = 0; i < pcs2000.length; i++) {
          data.push({ x: mcs2000[i], y: pcs2000[i], color: am5.Color.fromString("#" + Math.floor(.2 * 16777215).toString(16)), value: 6 })
        }
        console.log("data:",data);
        // add graphics to line series which will contain bullets
        var canvasBullets = series.children.push(am5.Graphics.new(root, {}));
        
        canvasBullets.set("draw", (display) => {
          
          // loop through all data items 
          am5.array.each(series.dataItems, (dataItem) => {
            // set fill style from data context
            var dataContext = dataItem.dataContext;
            if (dataContext) {
              const point = dataItem.get("point");
              if (point) {
                display.beginPath();
                display.beginFill(dataContext.color);
                //console.log("point.x=",point.x+" point.y=",point.y);
                display.drawCircle(point.x, point.y, dataContext.value / 2);        
                display.endFill();
              }
            }    
          })
        })
        series.strokes.template.on("userData", drawBullets);
            
        function drawBullets() {
          canvasBullets._markDirtyKey("draw");
        }
        
        series.data.setAll(data);
      })
    </script>
</body>
</html>