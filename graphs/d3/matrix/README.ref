https://gist.github.com/srosenthal/2770072

too ugly and too old version
need squares not rectangles
